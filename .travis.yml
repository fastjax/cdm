# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -Dmaven.rtest.skip -DrepoToken=$REPO_TOKEN clean deploy -P deploy;
  else
    mvn -Dmaven.rtest.skip clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: Bl6efJiEGVyTxMDLESIesSd15/zbwOSenf0q9/dDdxwxZXCJ689ESWjzEFQWrED6gvsnUJ3NA69Qo9yMhLKKatSwCtTrkNTLDhGOcf1KsSbxO6s018tRWKV7PvMNnkBm+dt/owdIhlql0r8dXEir9WnlZ99uLp3HIT9XzHCPLb5L3ZR5JnXUznIx3+OgiiAhPy9mKSCi/zTLLablso+fiRcmY38qAwAqmoU0owqOxa6t8g5prvCb117sOTSggALv5Guuyp7BN84rH4Csfmh4ydHRI2iHR6tOj76f1lIHhOCfJmpsE3MqX76B7yisfoMnZMm0TFn+HR47ExjuygY6+V3o5Mu9S4deXxMKyzHkB2+sNPquuapeRD7Zf2PiNUAbzso0CZgUj1f9iXm6VJxj8OL+mxXWrbVU4InijQYbZxcwdBNsfAHuIc+AlqJbFPpv7H2Ip2aBmggprWk6+s8ecmzHYu/FmvTUX4DWI5JaZcpGmhe5qULHndWRcTgrHeqMJTnFV2NKfsSGw5LMhXOraFo1AZ24rkBT/CZ/KvTusyvSB4qtMS2hzKn8uXhjd5bdrfp71LwB0b/xIzjECfHM5SR3cQyi1xQxDONzg3qLRx3N6GJVrUNirbXxy9ljs9nfxuOCT9VRqSVYE3e/6TChlXYmo4O0/WttmpcdtZf9Avk=
  - secure: zY6O2SSrThmQDXvBUomHbygTUKytVZ4xTkqvO/tLNT/WBs/fan+yPe1VETXHjmOrTcyu54JvP4liFGFQYjLUJ2mBN1uAkWDluxpk6r2S0neQmFZfTAwZIpiEZHgZqG1T9RDjI0axW94Rgfa7PozNrfa2+Y2z63Rky/Mscyko0h3RCQ7bZtW0+4t7vAHOprXw30YZclbnklyBe8goAa/Roivo4NQdRFoDkAjxFc70QKRsJsrObl00MCrVGkWdLW5Wig1YYJAY7pVX0nksUc1wQCE9T+atxFcHeKRycDYPBTqfWfFzgCIMuqub2S4iyBxJnMr07itlVD0tcrwIxjtlgeZ6EzQt1ufthEw4CeaIv2D4tUJjRu5CZkPa007KspwEuStmBkOkWZ7+psvrDwtLZWtXSXp3SWJPeZJ7fHA0hipZ8dOxpMnl41MtqboF7FxGYArr9wTz87DzT6vqxHQ4Kz56cSXvAs90XAk+4WpRh/NgGc+FuZGnWQziUt+DEdy+gp9H2/jjrzib9odIuGMwzknckeaaOCtF5f3jHSccP/P7a7lj7KxysRTY9pR8ZHscYOWL4/YSq6vQwEosjRQmAlnozDi5JD/omnKQjc+YcDsU01qzbr8fqafad5MB34yreTo4gsTn0EDV4nSiEusL1AiqqNBV499qRK7dC9FiYt0=
  - secure: XLeiWa6z6lJN3keOFx9lFE7ee5FBDMZbaIaCHGGJlVE40bzI/moDCEePd9I23QAICIBjq1yCyicKDmetopD/nwI9XmPbbey/7a+ZjBEMZxz5f/48ZwsYyf1b0jARKg1pBnb7EVrdNl15YVU5ttoCPbmgzwqPJ+d9ggz93SvKm5vdZCH7y4AIc7dz36b/NX+3rZVs/kbhANf8X5rz41pQNn6ohCjfkGHH3DO5wp8X0q5+/xcIxtfVBU5mhXwNgBGiouAbdVe4L/uc+YPwApW/KGjenEjfro+EItVSqsDB1YTcEMKc/rdK03qiCSRsa5Icw9CE/Kxd8h++usw9V/JarL3uAVylt5X3B5OZDIDI4AJzyG943ngyZoZIxfgkcc4V7XweIdnz1fT6M7Ja2o/Cy+6d/9sTzyYw0upwU7iC3LQk7TG2J1UozcGijE/7kJmEa5nTICQ354rBZVkDTlC9IZCxZQuy3cK0sHCblg/mRyGXpQ53rvO0Os60A56+WSMTFPuix+3XCIojnlvAoN4NJC5UFS6FwX4u0nC/cTlQHa6UAgDe0Vb3FQFpHskXFy9XM4pFRX21nyY1c6RF2tmT/zupkYmSjk9lvoUWKxYODBNI/XwVciY6PZjIZZLDXLhKhPRDQvQVxwfGOgVToOZqfcd/SuGtbXrOYfhaEQsBCfM=
  - secure: bYCMDuoIfpbrrMK29VB+zEvRALjuIhYm0Iaadsu1bqWPFDQgP+oL1CABz1+4a5aPiNuJKWVJKg5QCdr49sk2picAvu9+iygRO05QZBjhByTLT70+Jm0j4ftJDWvFKGXPxaekqJwSkAOBee5ygxwEVhpxs9uOb3mmOE84Pb0xJUtHdnq67znaaWHKGv+p6UoxbZP1W0bS0BBnMVt3x+y4iZpB36Fm3ozVG32MIEMXfZXy3DZH1nAFc18tS91BpNUIufgubLz4TLUT/iCebZzsP5nVpEAYpV9XR+myza98IiX6rpgguBCY7iAEwsWIxEp7JGNQfLLSCQhcT/zdUNNF6PxYud9sapIoziXCqXxrp4FjluCd/XJ1nE+2BP0D5QT7GMXoYdJzhuvRYy/o1rwrE3PTyC5fWDVFSm2uVWDtS5OW7cdqc5QhENJmxgcrhPgIQXjbe3SpZDcrphaTsXsZmv0lcTsN5CNbD3kybb81sFZM6L5czp+KSuqqOX/YntW4RPh8ZU7QnLi16Ai3jiy4Q4Xo3igZglZYP/Nau8CJ/fUzEnHuNlOCvcyNwu4CHlf/IXvB95itynyIuUv5uZFnKUQPQptW4mUVEzbt844xwL/SqPX1QB7ZqPN8tx04/NMGUQyUBcpSLrN5epBZHKMtOtNxU88bjnhoIr17iWHCGsw=
  - secure: iUs8b69e+hRY7MHFXI2ltGjwH7+qcjCvnnMQ/ooBGtv1sbQLF38B3P60Eoj1GJZEPrqmS1Tp1ib45pWRDY7BZIgKsNATSeMTmbVEJ22d/iBAl1JIWE5uBFPJ9nU0po4iJlzlWa8Lq1F4ndMVQCPc29PGLBJq9HXVDAo2ite3bhKbF+F7tUGZyBVUdFU5OKuUlqCDYkwMoAG0HOk099m9rQxKBNL2ArCB7mvrOzFupm9++2d00t49vcmxLjgQn/vUUdbkctfvZ5wJYdGtAFvQY8NXwcWFFbN4nRRLTE6mSNXRM4GCzy4NZzlTTwhF+hLgAut8BsbpL/5wTXW6K1yHW5FNpZuOfc6EgBB0x1Juuk9HiZr3R67IApYO+wQMB11QM1vJjq4NCgEuW5+sslzfqelgRCaab3amIzz2lVwKFapiBmxaDRw7M7bDJuDwASjwOXjIM/s0aJ65FDRa6uRbSRZ/TdPJnAJ5QuTS1sjDXYEO8mV9k87WZ7286dk9YayS9N/IaMOQyzcfv7OwjvSi2VxeclGNZyysNwQ0btmtmDSxlXmX3fMDz2ZK3Uu6FEIyrwSNPZw6HtMYdA+FwQvHKNx9gAuWSLVJg2JwEqWLKRhzM+LrzPo3WsrFkH5VVsn0WqVGvXy4NsxOlOL2bAzwGF2OhcQqOSXXktPLCCUI/HA=
  - secure: Teho9H6AoissSlddRBGAHPl+OaBt+mxbC/janZJqVxqefIBR98I68kD7gnMqcX7KuULz7p5j4SEcLas3hR/3D7AvWsg114oKKgLJNOxzTFEMrpndvD4zSDAEDrKEJg/VrVI+2DvC+972nqd73g8/2rF1FYeTvUkh1T0RhBTgRt+SgTpbFH9TP+m29M5QoSurvBMjWtowaRx35HuGSMVlFZ4/V89xn7F6lTKaSyvKFo2LkeBG6sPpvPtJsFqq0Sv/+IMetzEItysWNXdaXoJ3uOwhHCjdyNZQ2yAuyCdAMj3qB/6mtSVSDV4qfGQLemHdf3q+gIvrIjb22W/rGnPt+CJZXbDEKoFRjDdJ90GEsYDOGGQJLSmkjHgxXsCGQMwcz7CwvRLvFJ5NAh2WjY3wBJzzF9oVgv9ZXlHM1PVOAcytNNWGOHyhFAvm21WDF9vjeyUIUGk863cnMpJGiYc3KCeEhtYc6sjzS2Yze9YIqsPpiQXox1uF3N7CMiMjil7ogIBnL+IRIkrDxOMF9bpPk6cOgZALdMRoYCRWr2n5D/PVGtpVdByiTCNorDcyrEVot5jPIj3OUR0lyWePZm+TL5wOM4XWNXHGA2uMnn6HQHzLRfXJ9xuhK8Op6j8BvAURCIhS9cqH81qMBBEabADPwBqGr197fdb47Q/TCymdL/Y=
  - secure: AC/BMR6w9FNrQqKkN9uQckCpWXIVgyc6bZwzKtR/sUkOPwOhHj29qEt43O46LIi9HbUz543Uhwx7ZRMxL9sCQcH2VpjEm07qYxXm17XS01MS1hI9502afHKK3GAXmuGgJ4UzYaUvGehKBHKCmVwY0E/KnpD0EiG5iOa+V5M86GiSlSAaNqJOV+WbdOgJt2mIraOboWtsnRalW2FjNIoqEMByDQvN+5t7nWSxvzsLOKOkO+vmog/bcfSxCqVPXNUIA/iiWSrnlm4MmuVacc3r8bdjeRd9LZ7pESRajNULRxZRSK35f4WyrLrKhGFYJY3kOveTSeaTsXFpkclo1V5ChHHjQ9C/COOQIYsZCz7zuVwa1V9FVcKqsHmTBP9egj+0V6uxYcIkshqTIiVu8HFkOknCe5bREu04cmbv3cpcpJzE5uBiW1PYjfWiZRTtB4WqubdO6vdXUu046T+AfhBl3nwocOGLciZKJ4bVrl2fOVyJDO3LYv/FJuWunu3OR4eqwomlUKVJfDb7lCCVOHWZTZeK+4RgFvoMYKdGADoSafXpO8DfK4f/kzO684xsAidM9jhyk7HxVk3LcBQdJWtHxWogtev7nQKjkZhWe4xG2dS1PvI9DiBMjhlEtcyIj51W13YzM0RrfVVyypDB7wIMICKS/rtuD4EanX5UMsEifUs=

# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -DskipRTests -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -DskipRTests clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: GXthWeg0wRbcl/lshS4wEnn2SDRqmGGq/vQytKbmHJaXzGB9y/xomWJj3ANF1Szas4PEjcaHCAd+uYa9xS18nf5ic3YTCxO7AoXAtuNrp3F82+2U/Mee+nWMbt3xKQdihJkNrFLTa1RcoJ42j4SDHYJ9XPKwwY0Jw9WZ+WJDvRG9HxzTwWT5Hj2qs2t7CMjRX97tqM2DMAdSE5p+Cf1xSlkhjx/WQNxnjRDaya0DXGhItXt/mU0NPmLK2OHH8fqDr/CFuB6S6MNdz0dzDgKiauNnX7ntq6ATxuY77g9vsVQB8Y8awuH++ipJBAEsglAvLDYrd39jyP8mAJ2o5K8+LyDKjG2a33WCyVGaGtlyRh/BJzHhtwT5mOtzpGj+0itLpxmFPLpdnfzYOJqkO/jgstXFB4db2YWU6I30JnCFN+VTtScb//SAMiyC0Vz2BcjkaZcqGDD7skJyTm0oiW9InyP/JGgliS38no7rahk76jNrZDIv/MXz7l1IDz4fH/GmCJHRx1AEO8ihJTG2etRmP8BrQRFBqNSswPUaZQxyFHA8LLiFzTv4daAqq5LNPYzcXKtlkK+yZFK5hB8Fq8Rwf55rppGddAnRdjDAlOP3l+C02P60uIC5y45FjJIvwVrvpkTWOzdTsd6LCjLWKnSmR6APT+A1cH6JGgYZbI6DG1Q=
  - secure: q44rRYvUMJoLC3CEaW3y5RZGE2Ln6ywa1Urm+hvEPCwrVnCb2isnIVHIRZpGR1jod/H4O20+zEE2ocyJwgiTFSQtq5oGfcWqglJTdnV3uE44mAZY5fCr90RUw67qpftoOThQpD1tKxcL/83Ji4JF6V3UyBJDl608XKsYcZArIp1oN8a7h5gBkALdeQZaFggIXeuxABaI3Fiq9qT6KdiXDagvTRhFzXofc3qQW6YAiJXU96cWRHf96I26JDtrqDxDlzxtgrlVsyG83mO1lGVd4lfuBdDZpNRk3GtxozZWD+Me1RIdr3Ix+D6S8AoI27D83ne2xIA7MHn8rByCs/4w9+drMWC1edvPaSbEOAJM/ADHk45X8Fr8Stqv5TVdalfqSSOukizXYli5sHJssykx4cga7izLiTUuJLCmAlOMzK1KxDQyh9Q+SXvkQz6r6bsEXFF7BtMRPO9RCP4AtvGQGTAemu2MRqNKYRFG/Ffct7RQN30sbCzoN2/+hkL9Xia8MwoKIpS6EFmRx17RiblpzZ26cMxTRe8WvOzMOS82Y06NqxejigjGnLXcBkgRwQWSQUK4t0OwoxjETlhInwgxBirz02mVDrj9Yow/rcLdGkLV8gH0LrhnzWvOzPCJZmNZg+6wRxvvJG9fZvlivu2YaSRMQcyNldiBmF5wUC90gxY=
  - secure: lGSqZhPt/4ZJQqMd8MxFzF1ueRfyt3LxMTlQVOhlUqye1KR+3j4uEQWLz6Lb7mSItoSHrRiDVk0gaaAvkv8WlhESvVpEh37JAv1Bv4Wuxkbpfw2bZ1L/QUj/cfTRwVHDKY0J2s6Lnx4LhetQEytnLB6/qaHTDQfZFFM9npaYgPJiXFBfHq6evActudYGTUraYEDAeBjkp1uR84yeAPHhKSMme/j/zxmtA4iHcFV/jL2QU8jTw9zFeLKdl5rqbwdnSYjTt0g/HKRiXM8GdM8YVpn3Aju3XXPDrobDVQnp7bIpLWYNqnH9w/q9nwyap9n+nkxKr56Khk8Ehlyl4IzamcKvjagpUWvi35ZkE8+MTJHoT1pt6SmUDH6fwOTfNgZswvtUYfTvxS8y4dBBKaDUg69Jbjm6Bfhq740a868AwYK4R6lJzTmH6QpsOAiOxVemI2JR0vrJazcQlAMCHDvb4aCSTb7eWg6A75o/kd2HhhHyU5LpzwGSnxHG4vczBifNYeVnsVt/ZjihOb1gFDrSifAr5Q7mYSkZGfpfM5lafjYVflB7k8k0tZmQsCn6a3t8Bw+w6sP5g91vywEO35uv2ju5Y6fiSMS+pe1JtQY0ticZlJnFD3HtOa/rUcXxNWuNWmdzub8VSWZPqQlyg9E3KLTmjRR9fGv22Wd8MdNgAdU=
  - secure: Qv4NsO0UNy3YaOrz5oWLuB58X5F1zHNhahtdvrmKJYztywuMnDDJ8s5KBG0cnLEQF1r77R94hTOK4oky/umFKXg/9Y33SbRrb4pSUJOmXn4i0hz270Cktr1oBQjQ94DCqDQVRIxfnmDS7LEhpYy3LCeASpeB7eyX7euIWyTh5hd8qc1Z+LH6oRENMsqxqcEYvETKE0MXC5teLpTnBcTPNZ9OiOt/RYfvxiKqOSRAasUBcOpzZflISUm9WeYoAPUzl559h3Bf/Qq5vFE5ugrGvtTHjIWkq1TwDXpQcq9JcI1mWw+f+JeJ4lArjLCObiFdMwDNqnSTtKso7PG9El4CKknZLEU6iJILk+DPzUNWkllHVwQkb4gM+8RVivBx08eAd4gPogCUmkNghIyI9anFONrsQckG9aPJ8hy1ITiylRJ7d3iWUtRoDroWb8WJW8F88/XDII6DH1pJb1HUO8UUxry2OmTAMsENQibMQTzQ7ob4BxGLZO7VuUzHHWNHFoJ1Oj8WeBioA6jQK04cLnDVAneh486zWve0Y9fuyQyBqiyaDOcDxeRvIwyM0UbKrQkPaFvcyEw9l8k78PTWBMA3RsJ6ike72MeB206qrToi8eNLnWXCxyKk2zlTuYMuJIn+Yq2Y66iQ3qhHLrIIXMFYYSkVSHc5wtEhjunN+NIoFwg=
  - secure: vks3420N/3hcKZyDV+geKd1UyfB3m6wFOJRv69CUu7FksYfWG5xvKmFrju3viNpCId3INRoIsO/QN9wU9P0ILX4RkPpya98XCVSHYJpZZIZ5LeGpKk7J7g5J7Ut+J04RadvJ7dzjw60MilKL74nOhfOS3otm1j8qy1f93ll347WUCH4hiH0ZxKqqqPjOnRXvrb8KEMpjgkZWPFFP5bAgg0FK20uDM8Sxg1N4GVcxQc+PSoYFOGfUg9h2qGGjzUjpnb852rIX/5vJJUxvNfMxpxwIou6a5CXDpJhocA48NPr5oRWY9Uo7QGYKLqIdN1HkRDctXdSTjKMIsEtMeBwZ0aOD/ePbr+HDCsvwG7Yb/TAn2nkO/sFL9OtRVA2+borOxNanyzAYxqnaKcnS0XjHaFWHQu1+6k53ze8F+jTp9itMVvq4w+imho8d3J2y7P9PHU9SxsmDv8jcmF/XP0HTBAQ+PYHs79zJUY/EbaRMLtE1Y+iLbx8U7o8P0mN3wIxu2Wn/F6GelxQgADln5mCJGes9R5sWj+FikOEVA5u2bLvSnmnJ41irBK7phh+0Ma/R+FCwBF/wPONPWtcJNmCXUpFIeqlvMsFnRY7fjS8cVDbDMoJeNb5JBEryWcbcSb8A/wr+ZdYtF7IkSUmHui/onh/2kfCetn23SgtxEk/MX5w=
  - secure: RoTUM0vMt1Y+apL9ScO/OUvynXCYFfZKQAqrZobRpxuoU5CLCoOXTH2PY2qmLGB79GIGQb5kWurlFRkvgOEQ3I7DD5iBSwxII9g4bJC1TkXEX5mubrif51uCQLjp7aIMo420QZ1jZx1oc8xFDFrpgI3r/nq3BVqy0NP2aWXijG8pFroaYSnQnCcdHb2hW2NbjOc9Oix63f4x/+cZLE1wXPSKXrCAropmsrb8lqkBI2zeyUB2f8yxaR28PeQlmr8QXXEt4lmxlvgoFmuLbB09jevEztfdZ/sX3g3Cb6TWETM+65YlrF59VybR/VfcBBh6HilGgVlMLcUleTOWT5zNi11Jniha+1sKPdzofK2VYhkFvtnInBQLw/qC6eTbr2YeyVzcFQfZ0YmarIpu9/8gqlQm5i/HyEU9W3ZlQRhITSGpwKigIhSloFqQ9cGm5LIsgxYBuQGavdlYmai64hwqnqDU0iciv0llKskeqAn//Qs+DaSpCGW2ebY2eKDOuR8Kws8wZnmZmMlWPUpb0aiBe+xxJVOmCP0sFUEsggVw7Sc9UAysSssHFZitJ/3jR20xYsf5KYZmnRijD6aQAk2nKkoBJXq2mw25vHYcG8g42xIoOkWVHrOKRJyBe1+7YmGYxX2Cw+8tVxJFDQv8sgUb+1/y1RVfYPvL7ZJd/3miCjs=
  - secure: kPKjfNfoSCFJlP/z143kOsyV7tcbvR/acS2XvTZuNziy8XY2mwMsC59RfktT+8/0OlPJKd8kvNA9movFDfJezt94qWQJ9GlSu8lYPtMfiAyFT0L7JySNIRWhAzg/TtNl4VXc5W5yUFqMaRMSWjtqzYuUaYGEaETAmL7Ib30TuWFjOO9TJxnq2/Wdu3T5hVpfx/or34KLdiuZCERFaGdK+grAF3RfFgyV1DrtNJsfh5DiGcjTtOJPafGaXimfPRAgOnF+fGuCU6n/sKjLnWpm1aWszzJmdJOaXI8LP263ClGT7lUFNn5mffwmO7B336CVFUs28my25Soy05SIlzJN4dGT9hr+9aK6IvR/zgDAH4MLtgoMImx+IKgdRLcbND8S4wQ5xeslM01Mcm2+zIFgP01EYlgAUuU7NR+xrfp1qFvLhKHu3vlDlSFvMT6wJlvqI+ouhUZnRHLH8KcYLYmKSWrZp2nKzO1/xe1tALL6mYNow45jc0xdzFqs+iFZPGhJIsZE+v5HZJ1ExaCTxKQ6TZj2TMz/CJ65N8ISni4JQDxZWCHL23f/lN31atl4UBdmhXvsJhSjZwMLI5fbhBGxHHqNzhiLK4tSbLroYLQL1f1P5x8VT5Hc+jdqWUDa9/pOTDCdBXYmSeGMOkFxknEYwmzyDB4ZM+ppxVeNjfKDFJM=
